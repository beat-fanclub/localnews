<p id="notice"><%= notice %></p>

<h1>Posts</h1>
<%= link_to 'New Post', new_post_path %>

<%= render(MapComponent.new(map: { center: @bounds ? :bounds : :locate, bounds: @bounds }, reflex: "moveend->Posts#new_bounds")) do %>
  <ul>
    <% for post in @posts %>
      <li class="post-preview">
        <%= render(MarkerComponent.new(post.location, post.title)) do %>
          <p><%= link_to post.title, post_path(post) %></p>
          <p>By <%= post.user.name %></p>
          <p><%= post.comments.count %> Comments</p>
        <% end %>
      </li>
    <% end %>
  </ul>
<% end %>
